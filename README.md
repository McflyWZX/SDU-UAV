# SDU-UAV
# 山东大学电赛无人机方案和资料
四轴飞行器基本原理介绍：[四轴飞行器入门——基础知识-CSDN博客](https://blog.csdn.net/pix_csdn/article/details/81096324)
## 硬件简介

### 构成

最基本的四旋翼无人机由桨叶、电机、电调、电池、飞控和机架构成。当需要接收遥控信号时，还需要遥控器接收机。当需要执行自动控制任务时，还需要集成在飞控中的上层应用程序或独立的上层控制计算机，如STM32、TI单片机或树莓派香橙派等。可能还会需要一些传感器做闭环控制，下面将进行细致的介绍。
#### 电机

电机的常见规格是它的直径、高度和KV值，如2208 2300KV电机，它的直径就是22mm，高度是8mm，KV值是2300。直径和高度往往决定了它的输出功率和拉力，KV值则决定了输入电压的变化与输出转速的关系，比如升高相同的电压，2000KV的电机将比1000KV的电机转速上升更多。
一般来讲大KV值代表高机动和低力效，一般带多叶桨，常用在穿越机上。小KV值代表高力小长续航，一般带两叶桨。常用的KV值是1300和2300。
航模用的无刷电机有三条线，上面通过的是三相交流电流，当需要使电机反转时，只需调换任意两条线即可。
#### 电调
电调是电机的驱动器，它将电池的直流电转化成能够驱动电机的交流电，并且通过一条PWM控制线来控制电机的转速。它的主要参数是最大电流的支持的电池S数，一般用25-30A，3-4S电调。当最大电流低于电机需要电流时，电调可能被烧毁。
电调还分为独立电调（一个电机一个）和4和一电调，建议电赛用独立电调，更好更换和维护。
#### 电池
电池参数有容量、S数和倍率（C数），容量就是我们常见的mah。S数是电池的级数，航模锂电池是多级锂电池的串联，比如说3S电池就是3节电池串联，它决定了电池的总电压，S数越大同等电流下输出功率就越大。C数也就是放电倍率，决定了电池的最大放电电流，比如2300mah 25C电池，最大电流就是$2.3A\times25=57.5A$，确保电池的放电倍率足够。
动力锂电池单节满电电压是4.2V，一般用到3.6V就需要充电了，需要常备BB响来检测电池电压，避免过放。锂电池总电压一般可以通过$S数 \times 3.8V$来计算。
电赛一般配3-4S电池即可，我们当时的配置是3S 4500mah，能飞6分钟。
#### 飞控
飞控的基本功能是根据当前姿态和指令，通过调整电机的转速输出来控制飞机达到期望姿态。就平衡飞行来说，如果只是简单的给4个电机输出相同的值，是无法保持飞机的平衡的。这是由于各个电机和电调的微小差异，还有外部风扰造成的。这里一定要用到一个反馈控制器，也称闭环控制器，来修正飞机的姿态，这就是飞控。飞控根据自己的IMU（姿态传感器）来修正电机的输出来控制飞机的姿态。
一般来讲，飞控还接收接收机的信号，这样我们就可以通过遥控器来给飞控下达指令来控制飞机了。在电赛要求里，飞机需要自动起飞并完成任务，这时需要一个上层控制器来给飞控指令。可以直接模仿遥控器的信号输出给飞控（参考： [OPENMV结合PIX飞控实现四轴定点 循迹 2017电赛_Kevincoooool的博客-CSDN博客](https://blog.csdn.net/xiangkezhi167810/article/details/78618798) ），也可以使用PX4固件的专有通信协议mavlink。
#### 机架
机架即飞机的机身，它的参数就是轴距，比如330机架，即对角线电机距离为330mm。一般来讲电赛450mm-330mm机架完全够用，甚至可以上250机架。越小的机架一般来讲要越安全一些，电赛切记安全第一，不要上太大的机架。
#### 遥控器和接收机
即使我们使用单片机或者树莓派香橙派之类给飞控发送信号能够控制飞机飞行，我们还是最好准备好遥控器和接收机，并且做好随时手动接管的机制以防意外。另外遥控器遥感的手感肯定是要好过无线串口发指令之类的控制方式，可以尽可能的使用遥控器来调试参数。
#### 上层控制器
前面有说到自动控制任务需要上层控制，一般来讲在成品飞控的平台上，最好是再外接单片机或者单板机，不要轻易修改飞控的代码。
对于自动驾驶的无人机来说，上层控制器就相当与大脑，飞控就相当于底层控制的神经。我们的大脑只需要思考我们要去哪里，行走多块即可，底层控制神经在保持人体平衡的前提下接收大脑的指令驱动肌肉控制人体移动。四旋翼无人机也一样。
#### 其它传感器
飞控拥有IMU做姿态控制，但这远远不够。一般来讲，我们还需要对地距离传感器如激光测距传感器和超声波测距传感器来控制无人机的飞行高度，光流传感器来控制飞机的位移等。
另外，将这些传感器的数据传输给上层控制器之后我们就可以根据这些信息做复杂的动作，如指定坐标点飞行等等。

---

### 选购推荐
这里首先推荐一些店铺
新动模型，这家店东西还算多，重点是发货地是山东潍坊，物流时间比较短，对咱们山大比较友好：
[首页-新动模型-淘宝网 (taobao.com)](https://newmo.taobao.com/index.htm?spm=a1z10.3-c-s.w5002-14528659877.2.776b829czmo0Vy)
下面几家店虽然距离远，但是发货还算快，开发票也还算方便：
[首页-牛牌航空工厂店-淘宝网 (taobao.com)](https://shop187575144.taobao.com/?spm=a230r.7195193.1997079397.30.7160277ckuz7PS)
[驯龙者模型配件批发 (taobao.com)](https://shop112804780.taobao.com/?spm=a230r.7195193.1997079397.62.7160277ckuz7PS#/)
[首页-银燕EMAX品牌店-淘宝网 (taobao.com)](https://shop130706982.taobao.com/?spm=a230r.7195193.1997079397.2.4768421dq5JzrY)

另外避坑XXD（新西达）产品，他家电机电调虽然便宜，但是容易烧，玩玩可以，正经用不行。
#### 电机
推荐朗宇、银燕和T-Motor
[TMOTOR电机5寸穿越机电机F60Pro4破风无人机电机马达fpv无刷电机-淘宝网 (taobao.com)](https://item.taobao.com/item.htm?spm=a1z10.5-c-s.w4002-14528659934.18.7b9c1da8lQqPAF&id=682047864464)
[热销遥控航模飞机配件银燕多旋翼MT2208 II KV1500 2000无刷电机-淘宝网 (taobao.com)](https://item.taobao.com/item.htm?spm=a230r.1.14.28.3bca4705M7sHQg&id=522211177920&ns=1&abbucket=5#detail)
[热卖银燕Emax FPV航模遥控多旋翼MT2206 II KV1900 1500无刷电机-淘宝网 (taobao.com)](https://item.taobao.com/item.htm?spm=a1z10.5-c-s.w4002-22550464504.16.7a256df6z0JkVt&id=522211990287)
#### 电调
[好盈电调天行者无刷电调12AE 15A20A30A40A50A60A80A航模固定翼-淘宝网 (taobao.com)](https://item.taobao.com/item.htm?spm=a1z10.5-c-s.w4002-14528659934.29.2c4b355aeQwSMi&id=14222029428)
#### 电池
[格式格氏电池2S3S4S6S锂电池3S11.1V2200航模固定翼12V高倍率动力-淘宝网 (taobao.com)](https://item.taobao.com/item.htm?spm=a1z10.5-c-s.w4002-14528659934.12.62f124416f8DR9&id=13638845340)
建议3-4S，2300mah-4000mah
#### 飞控
飞控建议运行PX4固件的飞控，有完善的地面站调参和通信协议，业界通用。
[四轴多轴Pixhawk2.4.8 PX4 PIX32位APM飞控 自动定点巡航PIX2.4.6-淘宝网 (taobao.com)](https://item.taobao.com/item.htm?spm=a230r.1.14.33.5622466cEC1K3y&id=540349126200&ns=1&abbucket=5#detail)
#### 机架
[ZMR F450 V2 四轴机架 哪吒 四旋翼多轴集成沉金板PCB板耐炸 航拍-淘宝网 (taobao.com)](https://item.taobao.com/item.htm?spm=a1z10.3-c-s.w4002-14528659884.13.2ce0829cHLekOr&id=18132207528)
[四轴 F330机架 航拍无人机竞赛专用 集成沉金板PCB航模穿越机机架-淘宝网 (taobao.com)](https://item.taobao.com/item.htm?spm=a1z10.3-c-s.w4002-14528659884.11.2ce0829cHLekOr&id=15556902806)
[2015新款FPV穿越四轴250机架 图腾Q250 超轻高强度机架 非QAV250-淘宝网 (taobao.com)](https://item.taobao.com/item.htm?spm=a230r.1.14.24.37f42f35cDLLJ2&id=520738516076&ns=1&abbucket=5#detail)
#### 遥控器和接收机
遥控这里就不作推荐了，买实验室同款也行。也可以买RadioLink AT9S Pro比较贵但手感较好。
#### 上层控制器
单片机之类的话大家自己选吧，像stm32，T4MC，甚至是esp32都可以。
单板机的话现在不推荐树莓派了，性价比太低。可以看看RK3588S系列的板子，性能强劲：
[香橙派OrangePi 5开发板瑞芯微RK3588S主板4G/8G/16G内存可选NPU-tmall.com天猫](https://detail.tmall.com/item.htm?abbucket=5&id=694256947515&ns=1&spm=a230r.1.14.3.d92e1b39d525RA)
[CoolPi 4B瑞芯微RK3588S核心开发板AI智能树莓派接口8核6TNPU-淘宝网 (taobao.com)](https://item.taobao.com/item.htm?spm=a230r.1.14.3.42426e4eYXagPq&id=685046198291&ns=1&abbucket=5#detail)
#### 其它传感器
一般肯定要准备光流和激光定高，找PX4支持的光流和定高模块。
